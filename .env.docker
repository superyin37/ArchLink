# =============================================================================
# Docker 环境变量配置
# =============================================================================
# 说明：此文件用于 Docker 容器内的环境变量配置
# 路径已调整为容器内路径（/app/...），由 docker-compose.yml 中的 Volume 映射

# =============================================================================
# 数据目录配置
# =============================================================================

# 规范文件索引目录（容器内路径，映射到宿主机 ./output_pages）
SPEC_DATA_DIR=/app/data/output_pages

# 上传文件目录（容器内路径，映射到宿主机 ./spec_locator/uploads）
SPEC_UPLOAD_DIR=/app/uploads

# 临时文件目录（容器内路径，映射到宿主机 ./spec_locator/temp）
SPEC_TEMP_DIR=/app/temp

# 日志目录（容器内路径，映射到宿主机 ./spec_locator/logs）
SPEC_LOG_DIR=/app/logs

# =============================================================================
# API 服务配置
# =============================================================================

# API 监听地址（容器内必须使用 0.0.0.0 以便外部访问）
API_HOST=0.0.0.0

# API 监听端口
API_PORT=8002

# Uvicorn 工作进程数（根据 CPU 核心数调整）
API_WORKERS=4

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别：DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 调试模式（生产环境建议设置为 false）
DEBUG=false

# =============================================================================
# OCR 配置
# =============================================================================

# 是否使用 GPU（Docker 容器内默认使用 CPU）
# 注意：如需 GPU 支持，需要安装 NVIDIA Container Toolkit 并修改 docker-compose.yml
OCR_USE_GPU=false

# OCR 精度模式：fp32 或 fp16
OCR_PRECISION=fp32

# OCR 置信度阈值（0.0-1.0）
OCR_CONF_THRESHOLD=0.3

# OCR 懒加载模式（首次请求时才加载模型）
OCR_LAZY_LOAD=true

# 启动时后台预热（生产环境建议设置为 true）
OCR_WARMUP_ON_STARTUP=false

# =============================================================================
# 其他配置
# =============================================================================

# 时区设置
TZ=Asia/Shanghai

# Python 编码
PYTHONIOENCODING=utf-8

# 禁用 Python 字节码生成（减少容器体积）
PYTHONDONTWRITEBYTECODE=1

# Python 无缓冲输出（便于实时查看日志）
PYTHONUNBUFFERED=1
